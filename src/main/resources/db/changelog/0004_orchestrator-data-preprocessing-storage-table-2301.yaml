databaseChangeLog:
- property:
    name: TEXT.type
    value: TEXT
    dbms: mysql,postgresql
- property:
    name: TEXT.type
    value: VARCHAR(65535)
    dbms: h2
- changeSet:
    id: 0004_orchestrator-data-preprocessing-storage-table-2301
    author: a.lapshynov
    comment: >
      Create table for data preprocessing managing
    changes:
    - createTable:
        columns:
        - column:
            constraints:
              nullable: false
            name: id
            type: VARCHAR(36)
        - column:
            constraints:
              nullable: false
            name: created_at
            type: TIMESTAMP(6)
        - column:
            name: updated_at
            type: TIMESTAMP(6)
        - column:
            constraints:
              nullable: false
            name: version
            type: BIGINT
        - column:
            constraints:
              nullable: false
            name: storage_path
            type: VARCHAR(255)
        - column:
            name: callback
            type: VARCHAR(255)
        - column:
            constraints:
              nullable: true
            name: deployment_id
            type: VARCHAR(36)
        - column:
            constraints:
              nullable: false
            name: template
            type: CLOB
        tableName: storage_path_entity
    - addPrimaryKey:
        columnNames: id
        constraintName: pk__storage_path_entity
        tableName: storage_path_entity
    - addColumn:
      catalogName: cat
      columns:
      - column:
            constraints:
              nullable: true
            name: trigger_id
            type: VARCHAR(36)
        tableName: deployment
    - createIndex:
      columns:
      - column:
            name: deployment_id
        indexName: FKdb70f14942f55de7587ac375f
        tableName: workflow_reference
    - createIndex:
      columns:
      - column:
            name: trigger_id
        indexName: FKa00b27913548e4c0608a40ebb
        tableName: deployment
    - addForeignKeyConstraint:
        baseColumnNames: deployment_id
        baseTableName: storage_path_entity
        constraintName: deployment_id
        deferrable: false
        initiallyDeferred: false
        onDelete: NO ACTION
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: deployment
    - addForeignKeyConstraint:
        baseColumnNames: trigger_id
        baseTableName: deployment
        constraintName: trigger_id
        deferrable: false
        initiallyDeferred: false
        onDelete: NO ACTION
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: storage_path_entity
